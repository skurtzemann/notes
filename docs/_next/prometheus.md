## Prometheus time series

`scrape_samples_scraped`
* time series automatically generated by Prometheus as part of doing a scrape
* reports the numbers of samples that the target produced, before `metric_relabel_configs` is applied



scrape_samples_post_metric_relabeling


## Relabeling

= mutating labels

* https://prometheus.io/docs/prometheus/latest/configuration/configuration/#relabel_config

```
Initially, aside from the configured per-target labels, a target's job label is set to the job_name value of the respective scrape configuration. The __address__ label is set to the <host>:<port> address of the target. After relabeling, the instance label is set to the value of __address__ by default if it was not set during relabeling. The __scheme__ and __metrics_path__ labels are set to the scheme and metrics path of the target respectively. The __param_<name> label is set to the value of the first passed URL parameter called <name>.
```


job: => job_name
__address__: ==> <host:port>


relabeling can happened
* before scraping (scrape configuration) = on targets => `relabel_configs`
* after scraping = on metrics => `metric_relabel_configs`
* before alerts are sent => `alert_relabel_configs`


`write_relabel_configs`



## Resources

* [Taking advantage of Prometheus relabeling](https://www.slideshare.net/roidelapluie/taking-advantage-of-prometheus-relabeling-109483749)
* [Prometheus Up & Running](https://learning.oreilly.com/library/view/prometheus-up/9781492034131/)
* [Hands-On Infrastructure Monitoring with Prometheus](https://learning.oreilly.com/library/view/hands-on-infrastructure-monitoring/9781789612349)

* https://www.robustperception.io/which-targets-have-the-most-samples
* https://www.robustperception.io/which-are-my-biggest-metrics